import React, { useState, useEffect } from "react";
import style from "./index.module.css";
import generateRandomString from "../../../../../../utils/functions/generateRandomString";
import Objective from "../Objective/Objective";

function Objectives({ objectives, setObjectives, setObjectivesAreShown }) {
  const handleClick = () => {
    setObjectives((prevObjectives) => [
      ...prevObjectives,
      { id: generateRandomString(10), text: "" },
    ]);
  };

  useEffect(() => {
    if (!objectives.length) {
      setObjectives([{ id: generateRandomString(10), text: "" }]);
    }
  }, []);

  return (
    <div className={style.objectives}>
      <p className={style.title}>
        <svg
          width="25"
          height="25"
          viewBox="0 0 25 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.5538 3.78749C11.8753 3.86806 12.1517 4.07307 12.3221 4.35742C12.4926 4.64177 12.5431 4.98217 12.4625 5.30374L11.9125 7.49999H15.5875L16.2875 4.69624C16.3264 4.536 16.3967 4.38504 16.4942 4.25207C16.5917 4.1191 16.7146 4.00673 16.8557 3.92146C16.9969 3.83618 17.1535 3.77967 17.3166 3.75519C17.4797 3.7307 17.646 3.73873 17.8059 3.7788C17.9659 3.81887 18.1163 3.8902 18.2486 3.98867C18.3809 4.08715 18.4924 4.21082 18.5766 4.35257C18.6609 4.49431 18.7163 4.65133 18.7396 4.81458C18.7629 4.97782 18.7537 5.14407 18.7125 5.30374L18.1625 7.49999H21.25C21.5815 7.49999 21.8995 7.63169 22.1339 7.86611C22.3683 8.10053 22.5 8.41847 22.5 8.74999C22.5 9.08151 22.3683 9.39946 22.1339 9.63388C21.8995 9.8683 21.5815 9.99999 21.25 9.99999H17.5375L16.2875 15H18.75C19.0815 15 19.3995 15.1317 19.6339 15.3661C19.8683 15.6005 20 15.9185 20 16.25C20 16.5815 19.8683 16.8995 19.6339 17.1339C19.3995 17.3683 19.0815 17.5 18.75 17.5H15.6625L14.9625 20.3025C14.925 20.4642 14.8557 20.6167 14.7586 20.7513C14.6616 20.8859 14.5387 20.9999 14.3971 21.0865C14.2555 21.1731 14.0981 21.2306 13.9341 21.2557C13.77 21.2809 13.6026 21.2731 13.4416 21.2328C13.2806 21.1926 13.1293 21.1207 12.9963 21.0213C12.8634 20.9219 12.7516 20.7971 12.6675 20.6541C12.5833 20.511 12.5285 20.3527 12.5062 20.1882C12.4838 20.0238 12.4945 19.8565 12.5375 19.6962L13.0875 17.5H9.4125L8.7125 20.3025C8.67501 20.4642 8.60571 20.6167 8.50864 20.7513C8.41156 20.8859 8.28865 20.9999 8.14709 21.0865C8.00552 21.1731 7.84812 21.2306 7.68408 21.2557C7.52004 21.2809 7.35263 21.2731 7.19163 21.2328C7.03063 21.1926 6.87926 21.1207 6.74634 21.0213C6.61343 20.9219 6.50163 20.7971 6.41747 20.6541C6.33331 20.511 6.27847 20.3527 6.25615 20.1882C6.23384 20.0238 6.2445 19.8565 6.2875 19.6962L6.8375 17.5H3.75C3.41848 17.5 3.10054 17.3683 2.86612 17.1339C2.6317 16.8995 2.5 16.5815 2.5 16.25C2.5 15.9185 2.6317 15.6005 2.86612 15.3661C3.10054 15.1317 3.41848 15 3.75 15H7.4625L8.7125 9.99999H6.25C5.91848 9.99999 5.60054 9.8683 5.36612 9.63388C5.1317 9.39946 5 9.08151 5 8.74999C5 8.41847 5.1317 8.10053 5.36612 7.86611C5.60054 7.63169 5.91848 7.49999 6.25 7.49999H9.3375L10.0375 4.69624C10.1181 4.37467 10.3231 4.09828 10.6074 3.92785C10.8918 3.75743 11.2322 3.70694 11.5538 3.78749V3.78749ZM11.2875 9.99999L10.0375 15H13.71L14.96 9.99999H11.2888H11.2875Z"
            fill="#9B9B9B"
          />
        </svg>
        Learning Objectives
      </p>

      {objectives.map((objective) => (
        <Objective
          objective={objective}
          objectives={objectives}
          setObjectives={setObjectives}
          handleClick={handleClick}
          key={objective.id}
        />
      ))}

      <button onClick={handleClick}>
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M15 7.5C15.3978 7.5 15.7794 7.65804 16.0607 7.93934C16.342 8.22064 16.5 8.60218 16.5 9V13.5H21C21.3978 13.5 21.7794 13.658 22.0607 13.9393C22.342 14.2206 22.5 14.6022 22.5 15C22.5 15.3978 22.342 15.7794 22.0607 16.0607C21.7794 16.342 21.3978 16.5 21 16.5H16.5V21C16.5 21.3978 16.342 21.7794 16.0607 22.0607C15.7794 22.342 15.3978 22.5 15 22.5C14.6022 22.5 14.2206 22.342 13.9393 22.0607C13.658 21.7794 13.5 21.3978 13.5 21V16.5H9C8.60218 16.5 8.22064 16.342 7.93934 16.0607C7.65804 15.7794 7.5 15.3978 7.5 15C7.5 14.6022 7.65804 14.2206 7.93934 13.9393C8.22064 13.658 8.60218 13.5 9 13.5H13.5V9C13.5 8.60218 13.658 8.22064 13.9393 7.93934C14.2206 7.65804 14.6022 7.5 15 7.5V7.5Z"
            fill="#808080"
          />
        </svg>
      </button>

      <p
        className={style.continue}
        onClick={() => {
          setObjectivesAreShown(false);
        }}
      >
        Continue writing...
      </p>
    </div>
  );
}

export default Objectives;
